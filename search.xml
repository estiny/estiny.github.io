<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>多数据源配置</title>
      <link href="/2018/08/29/hello-world/"/>
      <url>/2018/08/29/hello-world/</url>
      <content type="html"><![CDATA[<p>server.port=8081<br>spring.profiles.active=dev</p><p>master.datasource.type=com.alibaba.druid.pool.DruidDataSource<br>master.datasource.driver-class-name=com.mysql.jdbc.Driver<br>master.datasource.url=jdbc:mysql://localhost:3306/spring?useSSL=false<br>master.datasource.username=root<br>master.datasource.password=root</p><p>slave.datasource.names=slave1,slave2</p><p>slave.datasource.slave1.type=com.alibaba.druid.pool.DruidDataSource<br>slave.datasource.slave1.driver-class-name=com.mysql.jdbc.Driver<br>slave.datasource.slave1.url=jdbc:mysql://localhost:3306/spring2?useSSL=false<br>slave.datasource.slave1.username=root<br>slave.datasource.slave1.password=root</p><p>slave.datasource.slave2.type=com.alibaba.druid.pool.DruidDataSource<br>slave.datasource.slave2.driver-class-name=com.mysql.jdbc.Driver<br>slave.datasource.slave2.url=jdbc:mysql://localhost:3306/spring2?useSSL=false<br>slave.datasource.slave2.username=root<br>slave.datasource.slave2.password=root</p><h1 id="下面为连接池的补充设置，应用到上面所有数据源中"><a href="#下面为连接池的补充设置，应用到上面所有数据源中" class="headerlink" title="下面为连接池的补充设置，应用到上面所有数据源中"></a>下面为连接池的补充设置，应用到上面所有数据源中</h1><h1 id="初始化大小，最小，最大"><a href="#初始化大小，最小，最大" class="headerlink" title="初始化大小，最小，最大"></a>初始化大小，最小，最大</h1><p>druid.initialSize=5<br>druid.minIdle=5<br>druid.maxActive=20</p><h1 id="配置获取连接等待超时的时间"><a href="#配置获取连接等待超时的时间" class="headerlink" title="配置获取连接等待超时的时间"></a>配置获取连接等待超时的时间</h1><p>druid.maxWait=60000</p><h1 id="配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒"><a href="#配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒" class="headerlink" title="配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒"></a>配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒</h1><p>druid.timeBetweenEvictionRunsMillis=60000</p><h1 id="配置一个连接在池中最小生存的时间，单位是毫秒"><a href="#配置一个连接在池中最小生存的时间，单位是毫秒" class="headerlink" title="配置一个连接在池中最小生存的时间，单位是毫秒"></a>配置一个连接在池中最小生存的时间，单位是毫秒</h1><p>druid.minEvictableIdleTimeMillis=300000<br>druid.validationQuery=SELECT 1 FROM DUAL<br>druid.testWhileIdle=true<br>druid.testOnBorrow=false<br>druid.testOnReturn=false</p><h1 id="打开PSCache，并且指定每个连接上PSCache的大小"><a href="#打开PSCache，并且指定每个连接上PSCache的大小" class="headerlink" title="打开PSCache，并且指定每个连接上PSCache的大小"></a>打开PSCache，并且指定每个连接上PSCache的大小</h1><p>druid.poolPreparedStatements=true<br>druid.maxPoolPreparedStatementPerConnectionSize=20</p><h1 id="配置监控统计拦截的filters，去掉后监控界面sql无法统计，’wall’用于防火墙"><a href="#配置监控统计拦截的filters，去掉后监控界面sql无法统计，’wall’用于防火墙" class="headerlink" title="配置监控统计拦截的filters，去掉后监控界面sql无法统计，’wall’用于防火墙"></a>配置监控统计拦截的filters，去掉后监控界面sql无法统计，’wall’用于防火墙</h1><p>druid.filters=stat,wall,log4j</p><h1 id="通过connectProperties属性来打开mergeSql功能；慢SQL记录"><a href="#通过connectProperties属性来打开mergeSql功能；慢SQL记录" class="headerlink" title="通过connectProperties属性来打开mergeSql功能；慢SQL记录"></a>通过connectProperties属性来打开mergeSql功能；慢SQL记录</h1><p>druid.connectionProperties=druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000</p><h1 id="合并多个DruidDataSource的监控数据"><a href="#合并多个DruidDataSource的监控数据" class="headerlink" title="合并多个DruidDataSource的监控数据"></a>合并多个DruidDataSource的监控数据</h1><p>#druid.useGlobalDataSourceStat=true</p>]]></content>
      
      
        <tags>
            
            <tag> 多数据源配置 </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
